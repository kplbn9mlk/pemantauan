<?php
// This script and data application were generated by AppGini 5.97
// Download AppGini for free from https://bigprof.com/appgini/download/

	$currDir = dirname(__FILE__);
	include_once("{$currDir}/lib.php");
	@include_once("{$currDir}/hooks/pprt.php");
	include_once("{$currDir}/pprt_dml.php");

	// mm: can the current member access this page?
	$perm = getTablePermissions('pprt');
	if(!$perm['access']) {
		echo error_message($Translation['tableAccessDenied']);
		exit;
	}

	$x = new DataList;
	$x->TableName = 'pprt';

	// Fields that can be displayed in the table view
	$x->QueryFieldsTV = [
		"`pprt`.`ID`" => "ID",
		"IF(    CHAR_LENGTH(`tahun1`.`tahun`), CONCAT_WS('',   `tahun1`.`tahun`), '') /* Tahun laksana */" => "tahun_laksana",
		"IF(    CHAR_LENGTH(`kelulusan1`.`kelulusan_jawatankuasa`), CONCAT_WS('',   `kelulusan1`.`kelulusan_jawatankuasa`), '') /* Kelulusan */" => "Kelulusan",
		"`pprt`.`Nama`" => "Nama",
		"`pprt`.`IC`" => "IC",
		"`pprt`.`alamat`" => "alamat",
		"IF(    CHAR_LENGTH(`ekasih1`.`status_ekasih`), CONCAT_WS('',   `ekasih1`.`status_ekasih`), '') /* Status E-Kasih */" => "ekasih",
		"IF(    CHAR_LENGTH(`negeri1`.`nama_negeri`), CONCAT_WS('',   `negeri1`.`nama_negeri`), '') /* Negeri */" => "negeri",
		"IF(    CHAR_LENGTH(`daerah1`.`nama_daerah`), CONCAT_WS('',   `daerah1`.`nama_daerah`), '') /* Daerah */" => "Daerah",
		"IF(    CHAR_LENGTH(`PARLIMEN1`.`nama_parlimen`), CONCAT_WS('',   `PARLIMEN1`.`nama_parlimen`), '') /* Parlimen */" => "Parlimen",
		"IF(    CHAR_LENGTH(`Dun1`.`nama_dun`), CONCAT_WS('',   `Dun1`.`nama_dun`), '') /* DUN */" => "DUN",
		"IF(    CHAR_LENGTH(`agensi_pelaksana1`.`pelaksana`), CONCAT_WS('',   `agensi_pelaksana1`.`pelaksana`), '') /* Agensi Pelaksana */" => "AgensiPelaksana",
		"`pprt`.`NamaKontraktor`" => "NamaKontraktor",
		"if(`pprt`.`TarikhTawaranSSTLantikan`,date_format(`pprt`.`TarikhTawaranSSTLantikan`,'%d/%m/%Y'),'')" => "TarikhTawaranSSTLantikan",
		"if(`pprt`.`TarikhSiapProjek`,date_format(`pprt`.`TarikhSiapProjek`,'%d/%m/%Y'),'')" => "TarikhSiapProjek",
		"`pprt`.`jenis_binaan`" => "jenis_binaan",
		"`pprt`.`skop`" => "skop",
		"`pprt`.`Peta`" => "Peta",
		"FORMAT(`pprt`.`PeruntukanDiluluskan`, 2)" => "PeruntukanDiluluskan",
		"FORMAT(`pprt`.`Kosprojek`, 2)" => "Kosprojek",
		"`pprt`.`Perbelanjaan`" => "Perbelanjaan",
		"`pprt`.`penjimatan`" => "penjimatan",
		"`pprt`.`Peratus_siap`" => "Peratus_siap",
		"IF(    CHAR_LENGTH(`status_pelaksanaan1`.`status_laksana`), CONCAT_WS('',   `status_pelaksanaan1`.`status_laksana`), '') /* Status */" => "Status",
		"`pprt`.`sumber_permohonan`" => "sumber_permohonan",
		"`pprt`.`catatan`" => "catatan",
		"`pprt`.`gambar1`" => "gambar1",
		"`pprt`.`gambar2`" => "gambar2",
		"`pprt`.`gambar3`" => "gambar3",
	];
	// mapping incoming sort by requests to actual query fields
	$x->SortFields = [
		1 => '`pprt`.`ID`',
		2 => '`tahun1`.`tahun`',
		3 => '`kelulusan1`.`kelulusan_jawatankuasa`',
		4 => 4,
		5 => 5,
		6 => 6,
		7 => '`ekasih1`.`status_ekasih`',
		8 => '`negeri1`.`nama_negeri`',
		9 => '`daerah1`.`nama_daerah`',
		10 => '`PARLIMEN1`.`nama_parlimen`',
		11 => '`Dun1`.`nama_dun`',
		12 => '`agensi_pelaksana1`.`pelaksana`',
		13 => 13,
		14 => '`pprt`.`TarikhTawaranSSTLantikan`',
		15 => '`pprt`.`TarikhSiapProjek`',
		16 => 16,
		17 => 17,
		18 => 18,
		19 => '`pprt`.`PeruntukanDiluluskan`',
		20 => '`pprt`.`Kosprojek`',
		21 => '`pprt`.`Perbelanjaan`',
		22 => '`pprt`.`penjimatan`',
		23 => 23,
		24 => '`status_pelaksanaan1`.`status_laksana`',
		25 => 25,
		26 => 26,
		27 => 27,
		28 => 28,
		29 => 29,
	];

	// Fields that can be displayed in the csv file
	$x->QueryFieldsCSV = [
		"`pprt`.`ID`" => "ID",
		"IF(    CHAR_LENGTH(`tahun1`.`tahun`), CONCAT_WS('',   `tahun1`.`tahun`), '') /* Tahun laksana */" => "tahun_laksana",
		"IF(    CHAR_LENGTH(`kelulusan1`.`kelulusan_jawatankuasa`), CONCAT_WS('',   `kelulusan1`.`kelulusan_jawatankuasa`), '') /* Kelulusan */" => "Kelulusan",
		"`pprt`.`Nama`" => "Nama",
		"`pprt`.`IC`" => "IC",
		"`pprt`.`alamat`" => "alamat",
		"IF(    CHAR_LENGTH(`ekasih1`.`status_ekasih`), CONCAT_WS('',   `ekasih1`.`status_ekasih`), '') /* Status E-Kasih */" => "ekasih",
		"IF(    CHAR_LENGTH(`negeri1`.`nama_negeri`), CONCAT_WS('',   `negeri1`.`nama_negeri`), '') /* Negeri */" => "negeri",
		"IF(    CHAR_LENGTH(`daerah1`.`nama_daerah`), CONCAT_WS('',   `daerah1`.`nama_daerah`), '') /* Daerah */" => "Daerah",
		"IF(    CHAR_LENGTH(`PARLIMEN1`.`nama_parlimen`), CONCAT_WS('',   `PARLIMEN1`.`nama_parlimen`), '') /* Parlimen */" => "Parlimen",
		"IF(    CHAR_LENGTH(`Dun1`.`nama_dun`), CONCAT_WS('',   `Dun1`.`nama_dun`), '') /* DUN */" => "DUN",
		"IF(    CHAR_LENGTH(`agensi_pelaksana1`.`pelaksana`), CONCAT_WS('',   `agensi_pelaksana1`.`pelaksana`), '') /* Agensi Pelaksana */" => "AgensiPelaksana",
		"`pprt`.`NamaKontraktor`" => "NamaKontraktor",
		"if(`pprt`.`TarikhTawaranSSTLantikan`,date_format(`pprt`.`TarikhTawaranSSTLantikan`,'%d/%m/%Y'),'')" => "TarikhTawaranSSTLantikan",
		"if(`pprt`.`TarikhSiapProjek`,date_format(`pprt`.`TarikhSiapProjek`,'%d/%m/%Y'),'')" => "TarikhSiapProjek",
		"`pprt`.`jenis_binaan`" => "jenis_binaan",
		"`pprt`.`skop`" => "skop",
		"`pprt`.`Peta`" => "Peta",
		"FORMAT(`pprt`.`PeruntukanDiluluskan`, 2)" => "PeruntukanDiluluskan",
		"FORMAT(`pprt`.`Kosprojek`, 2)" => "Kosprojek",
		"`pprt`.`Perbelanjaan`" => "Perbelanjaan",
		"`pprt`.`penjimatan`" => "penjimatan",
		"`pprt`.`Peratus_siap`" => "Peratus_siap",
		"IF(    CHAR_LENGTH(`status_pelaksanaan1`.`status_laksana`), CONCAT_WS('',   `status_pelaksanaan1`.`status_laksana`), '') /* Status */" => "Status",
		"`pprt`.`sumber_permohonan`" => "sumber_permohonan",
		"`pprt`.`catatan`" => "catatan",
		"`pprt`.`gambar1`" => "gambar1",
		"`pprt`.`gambar2`" => "gambar2",
		"`pprt`.`gambar3`" => "gambar3",
	];
	// Fields that can be filtered
	$x->QueryFieldsFilters = [
		"`pprt`.`ID`" => "ID",
		"IF(    CHAR_LENGTH(`tahun1`.`tahun`), CONCAT_WS('',   `tahun1`.`tahun`), '') /* Tahun laksana */" => "Tahun laksana",
		"IF(    CHAR_LENGTH(`kelulusan1`.`kelulusan_jawatankuasa`), CONCAT_WS('',   `kelulusan1`.`kelulusan_jawatankuasa`), '') /* Kelulusan */" => "Kelulusan",
		"`pprt`.`Nama`" => "Nama Pemohon",
		"`pprt`.`IC`" => "No Kad Pengenalan",
		"`pprt`.`alamat`" => "Alamat",
		"IF(    CHAR_LENGTH(`ekasih1`.`status_ekasih`), CONCAT_WS('',   `ekasih1`.`status_ekasih`), '') /* Status E-Kasih */" => "Status E-Kasih",
		"IF(    CHAR_LENGTH(`negeri1`.`nama_negeri`), CONCAT_WS('',   `negeri1`.`nama_negeri`), '') /* Negeri */" => "Negeri",
		"IF(    CHAR_LENGTH(`daerah1`.`nama_daerah`), CONCAT_WS('',   `daerah1`.`nama_daerah`), '') /* Daerah */" => "Daerah",
		"IF(    CHAR_LENGTH(`PARLIMEN1`.`nama_parlimen`), CONCAT_WS('',   `PARLIMEN1`.`nama_parlimen`), '') /* Parlimen */" => "Parlimen",
		"IF(    CHAR_LENGTH(`Dun1`.`nama_dun`), CONCAT_WS('',   `Dun1`.`nama_dun`), '') /* DUN */" => "DUN",
		"IF(    CHAR_LENGTH(`agensi_pelaksana1`.`pelaksana`), CONCAT_WS('',   `agensi_pelaksana1`.`pelaksana`), '') /* Agensi Pelaksana */" => "Agensi Pelaksana",
		"`pprt`.`NamaKontraktor`" => "Nama Kontraktor",
		"`pprt`.`TarikhTawaranSSTLantikan`" => "Tarikh SST",
		"`pprt`.`TarikhSiapProjek`" => "Tarikh Siap Projek",
		"`pprt`.`jenis_binaan`" => "Jenis Binaan",
		"`pprt`.`skop`" => "Jenis PPRT",
		"`pprt`.`Peta`" => "Peta",
		"`pprt`.`PeruntukanDiluluskan`" => "Peruntukan ",
		"`pprt`.`Kosprojek`" => "Kos projek",
		"`pprt`.`Perbelanjaan`" => "Perbelanjaan",
		"`pprt`.`penjimatan`" => "penjimatan",
		"`pprt`.`Peratus_siap`" => "Peratus Siap Projek",
		"IF(    CHAR_LENGTH(`status_pelaksanaan1`.`status_laksana`), CONCAT_WS('',   `status_pelaksanaan1`.`status_laksana`), '') /* Status */" => "Status",
		"`pprt`.`sumber_permohonan`" => "Sumber Permohonan",
		"`pprt`.`catatan`" => "Catatan",
	];

	// Fields that can be quick searched
	$x->QueryFieldsQS = [
		"`pprt`.`ID`" => "ID",
		"IF(    CHAR_LENGTH(`tahun1`.`tahun`), CONCAT_WS('',   `tahun1`.`tahun`), '') /* Tahun laksana */" => "tahun_laksana",
		"IF(    CHAR_LENGTH(`kelulusan1`.`kelulusan_jawatankuasa`), CONCAT_WS('',   `kelulusan1`.`kelulusan_jawatankuasa`), '') /* Kelulusan */" => "Kelulusan",
		"`pprt`.`Nama`" => "Nama",
		"`pprt`.`IC`" => "IC",
		"`pprt`.`alamat`" => "alamat",
		"IF(    CHAR_LENGTH(`ekasih1`.`status_ekasih`), CONCAT_WS('',   `ekasih1`.`status_ekasih`), '') /* Status E-Kasih */" => "ekasih",
		"IF(    CHAR_LENGTH(`negeri1`.`nama_negeri`), CONCAT_WS('',   `negeri1`.`nama_negeri`), '') /* Negeri */" => "negeri",
		"IF(    CHAR_LENGTH(`daerah1`.`nama_daerah`), CONCAT_WS('',   `daerah1`.`nama_daerah`), '') /* Daerah */" => "Daerah",
		"IF(    CHAR_LENGTH(`PARLIMEN1`.`nama_parlimen`), CONCAT_WS('',   `PARLIMEN1`.`nama_parlimen`), '') /* Parlimen */" => "Parlimen",
		"IF(    CHAR_LENGTH(`Dun1`.`nama_dun`), CONCAT_WS('',   `Dun1`.`nama_dun`), '') /* DUN */" => "DUN",
		"IF(    CHAR_LENGTH(`agensi_pelaksana1`.`pelaksana`), CONCAT_WS('',   `agensi_pelaksana1`.`pelaksana`), '') /* Agensi Pelaksana */" => "AgensiPelaksana",
		"`pprt`.`NamaKontraktor`" => "NamaKontraktor",
		"if(`pprt`.`TarikhTawaranSSTLantikan`,date_format(`pprt`.`TarikhTawaranSSTLantikan`,'%d/%m/%Y'),'')" => "TarikhTawaranSSTLantikan",
		"if(`pprt`.`TarikhSiapProjek`,date_format(`pprt`.`TarikhSiapProjek`,'%d/%m/%Y'),'')" => "TarikhSiapProjek",
		"`pprt`.`jenis_binaan`" => "jenis_binaan",
		"`pprt`.`skop`" => "skop",
		"`pprt`.`Peta`" => "Peta",
		"FORMAT(`pprt`.`PeruntukanDiluluskan`, 2)" => "PeruntukanDiluluskan",
		"FORMAT(`pprt`.`Kosprojek`, 2)" => "Kosprojek",
		"`pprt`.`Perbelanjaan`" => "Perbelanjaan",
		"`pprt`.`penjimatan`" => "penjimatan",
		"`pprt`.`Peratus_siap`" => "Peratus_siap",
		"IF(    CHAR_LENGTH(`status_pelaksanaan1`.`status_laksana`), CONCAT_WS('',   `status_pelaksanaan1`.`status_laksana`), '') /* Status */" => "Status",
		"`pprt`.`sumber_permohonan`" => "sumber_permohonan",
		"`pprt`.`catatan`" => "catatan",
	];

	// Lookup fields that can be used as filterers
	$x->filterers = ['tahun_laksana' => 'Tahun laksana', 'Kelulusan' => 'Kelulusan', 'ekasih' => 'Status E-Kasih', 'negeri' => 'Negeri', 'Daerah' => 'Daerah', 'Parlimen' => 'Parlimen', 'DUN' => 'DUN', 'AgensiPelaksana' => 'Agensi Pelaksana', 'Status' => 'Status', ];

	$x->QueryFrom = "`pprt` LEFT JOIN `tahun` as tahun1 ON `tahun1`.`id`=`pprt`.`tahun_laksana` LEFT JOIN `kelulusan` as kelulusan1 ON `kelulusan1`.`id`=`pprt`.`Kelulusan` LEFT JOIN `ekasih` as ekasih1 ON `ekasih1`.`id`=`pprt`.`ekasih` LEFT JOIN `negeri` as negeri1 ON `negeri1`.`id`=`pprt`.`negeri` LEFT JOIN `daerah` as daerah1 ON `daerah1`.`id`=`pprt`.`Daerah` LEFT JOIN `PARLIMEN` as PARLIMEN1 ON `PARLIMEN1`.`id`=`pprt`.`Parlimen` LEFT JOIN `Dun` as Dun1 ON `Dun1`.`id`=`pprt`.`DUN` LEFT JOIN `agensi_pelaksana` as agensi_pelaksana1 ON `agensi_pelaksana1`.`id`=`pprt`.`AgensiPelaksana` LEFT JOIN `status_pelaksanaan` as status_pelaksanaan1 ON `status_pelaksanaan1`.`id`=`pprt`.`Status` ";
	$x->QueryWhere = '';
	$x->QueryOrder = '';

	$x->AllowSelection = 1;
	$x->HideTableView = ($perm['view'] == 0 ? 1 : 0);
	$x->AllowDelete = $perm['delete'];
	$x->AllowMassDelete = (getLoggedAdmin() !== false);
	$x->AllowInsert = $perm['insert'];
	$x->AllowUpdate = $perm['edit'];
	$x->SeparateDV = 1;
	$x->AllowDeleteOfParents = 0;
	$x->AllowFilters = 1;
	$x->AllowSavingFilters = 1;
	$x->AllowSorting = 1;
	$x->AllowNavigation = 1;
	$x->AllowPrinting = 1;
	$x->AllowPrintingDV = 1;
	$x->AllowCSV = 1;
	$x->RecordsPerPage = 10;
	$x->QuickSearch = 1;
	$x->QuickSearchText = $Translation['quick search'];
	$x->ScriptFileName = 'pprt_view.php';
	$x->RedirectAfterInsert = 'pprt_view.php?SelectedID=#ID#';
	$x->TableTitle = 'PPRT';
	$x->TableIcon = 'resources/table_icons/car.png';
	$x->PrimaryKey = '`pprt`.`ID`';

	$x->ColWidth = [150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, ];
	$x->ColCaption = ['Tahun laksana', 'Kelulusan', 'Nama Pemohon', 'No Kad Pengenalan', 'Alamat', 'Status E-Kasih', 'Negeri', 'Daerah', 'Parlimen', 'DUN', 'Agensi Pelaksana', 'Nama Kontraktor', 'Tarikh SST', 'Tarikh Siap Projek', 'Jenis Binaan', 'Jenis PPRT', 'Peta', 'Peruntukan ', 'Kos projek', 'Perbelanjaan', 'penjimatan', 'Peratus Siap Projek', 'Status', 'Sumber Permohonan', 'Catatan', 'Gambar projek', 'Gambar projek', 'Gambar projek', ];
	$x->ColFieldName = ['tahun_laksana', 'Kelulusan', 'Nama', 'IC', 'alamat', 'ekasih', 'negeri', 'Daerah', 'Parlimen', 'DUN', 'AgensiPelaksana', 'NamaKontraktor', 'TarikhTawaranSSTLantikan', 'TarikhSiapProjek', 'jenis_binaan', 'skop', 'Peta', 'PeruntukanDiluluskan', 'Kosprojek', 'Perbelanjaan', 'penjimatan', 'Peratus_siap', 'Status', 'sumber_permohonan', 'catatan', 'gambar1', 'gambar2', 'gambar3', ];
	$x->ColNumber  = [2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, ];

	// template paths below are based on the app main directory
	$x->Template = 'templates/pprt_templateTV.html';
	$x->SelectedTemplate = 'templates/pprt_templateTVS.html';
	$x->TemplateDV = 'templates/pprt_templateDV.html';
	$x->TemplateDVP = 'templates/pprt_templateDVP.html';

	$x->ShowTableHeader = 0;
	$x->TVClasses = "";
	$x->DVClasses = "";
	$x->HasCalculatedFields = true;
	$x->AllowConsoleLog = false;
	$x->AllowDVNavigation = true;

	// hook: pprt_init
	$render = true;
	if(function_exists('pprt_init')) {
		$args = [];
		$render = pprt_init($x, getMemberInfo(), $args);
	}

	if($render) $x->Render();

	// column sums
	if(strpos($x->HTML, '<!-- tv data below -->')) {
		// if printing multi-selection TV, calculate the sum only for the selected records
		if(isset($_REQUEST['Print_x']) && is_array($_REQUEST['record_selector'])) {
			$QueryWhere = '';
			foreach($_REQUEST['record_selector'] as $id) {   // get selected records
				if($id != '') $QueryWhere .= "'" . makeSafe($id) . "',";
			}
			if($QueryWhere != '') {
				$QueryWhere = 'where `pprt`.`ID` in ('.substr($QueryWhere, 0, -1).')';
			} else { // if no selected records, write the where clause to return an empty result
				$QueryWhere = 'where 1=0';
			}
		} else {
			$QueryWhere = $x->QueryWhere;
		}

		$sumQuery = "SELECT FORMAT(SUM(`pprt`.`PeruntukanDiluluskan`), 2), FORMAT(SUM(`pprt`.`Kosprojek`), 2), SUM(`pprt`.`Perbelanjaan`), SUM(`pprt`.`penjimatan`) FROM {$x->QueryFrom} {$QueryWhere}";
		$res = sql($sumQuery, $eo);
		if($row = db_fetch_row($res)) {
			$sumRow = '<tr class="success sum">';
			if(!isset($_REQUEST['Print_x'])) $sumRow .= '<th class="text-center sum">&sum;</th>';
			$sumRow .= '<td class="pprt-tahun_laksana sum"></td>';
			$sumRow .= '<td class="pprt-Kelulusan sum"></td>';
			$sumRow .= '<td class="pprt-Nama sum"></td>';
			$sumRow .= '<td class="pprt-IC sum"></td>';
			$sumRow .= '<td class="pprt-alamat sum"></td>';
			$sumRow .= '<td class="pprt-ekasih sum"></td>';
			$sumRow .= '<td class="pprt-negeri sum"></td>';
			$sumRow .= '<td class="pprt-Daerah sum"></td>';
			$sumRow .= '<td class="pprt-Parlimen sum"></td>';
			$sumRow .= '<td class="pprt-DUN sum"></td>';
			$sumRow .= '<td class="pprt-AgensiPelaksana sum"></td>';
			$sumRow .= '<td class="pprt-NamaKontraktor sum"></td>';
			$sumRow .= '<td class="pprt-TarikhTawaranSSTLantikan sum"></td>';
			$sumRow .= '<td class="pprt-TarikhSiapProjek sum"></td>';
			$sumRow .= '<td class="pprt-jenis_binaan sum"></td>';
			$sumRow .= '<td class="pprt-skop sum"></td>';
			$sumRow .= '<td class="pprt-Peta sum"></td>';
			$sumRow .= "<td class=\"pprt-PeruntukanDiluluskan text-left sum\">{$row[0]}</td>";
			$sumRow .= "<td class=\"pprt-Kosprojek text-left sum\">{$row[1]}</td>";
			$sumRow .= "<td class=\"pprt-Perbelanjaan text-left sum\">{$row[2]}</td>";
			$sumRow .= "<td class=\"pprt-penjimatan text-left sum\">{$row[3]}</td>";
			$sumRow .= '<td class="pprt-Peratus_siap sum"></td>';
			$sumRow .= '<td class="pprt-Status sum"></td>';
			$sumRow .= '<td class="pprt-sumber_permohonan sum"></td>';
			$sumRow .= '<td class="pprt-catatan sum"></td>';
			$sumRow .= '<td class="pprt-gambar1 sum"></td>';
			$sumRow .= '<td class="pprt-gambar2 sum"></td>';
			$sumRow .= '<td class="pprt-gambar3 sum"></td>';
			$sumRow .= '</tr>';

			$x->HTML = str_replace('<!-- tv data below -->', '', $x->HTML);
			$x->HTML = str_replace('<!-- tv data above -->', $sumRow, $x->HTML);
		}
	}

	// hook: pprt_header
	$headerCode = '';
	if(function_exists('pprt_header')) {
		$args = [];
		$headerCode = pprt_header($x->ContentType, getMemberInfo(), $args);
	}

	if(!$headerCode) {
		include_once("{$currDir}/header.php"); 
	} else {
		ob_start();
		include_once("{$currDir}/header.php");
		echo str_replace('<%%HEADER%%>', ob_get_clean(), $headerCode);
	}

	echo $x->HTML;

	// hook: pprt_footer
	$footerCode = '';
	if(function_exists('pprt_footer')) {
		$args = [];
		$footerCode = pprt_footer($x->ContentType, getMemberInfo(), $args);
	}

	if(!$footerCode) {
		include_once("{$currDir}/footer.php"); 
	} else {
		ob_start();
		include_once("{$currDir}/footer.php");
		echo str_replace('<%%FOOTER%%>', ob_get_clean(), $footerCode);
	}
